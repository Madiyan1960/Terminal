<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Контроль склада</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/Terminal/manifest.json">
    <link rel="apple-touch-icon" href="/Terminal/icons/icon-192x192.png">
    
 <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="ТКО Склад">
    <link rel="apple-touch-icon" href="/Terminal/icons/icon-192x192.png">
    
    <!-- Библиотеки для экспорта -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Библиотека для графиков -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
   
</head>
<body>
    <div class="container">
        <h1>Визуальный контроль склада</h1>

        <div class="controls">
    <button id="exportExcelButton">Экспорт в Excel</button>
    <button id="printPdfButton">Сохранить в PDF</button>
</div>

        <div class="data-section">
            <h2>Текущие остатки материалов</h2>
            <p id="materials-loading" class="loading">Загрузка материалов...</p>
            <div id="materials-table-container">
                <table class="materials-table"></table> 
            </div>
        </div>

        <!-- Новая секция с графиком -->
        <hr>
        <div class="data-section">
            <h2>Анализ движения материалов</h2>
            <p id="chart-loading" class="loading">Загрузка данных для анализа...</p>
            <div id="chart-container" style="display: none;">
                <canvas id="movementChart" width="400" height="200"></canvas>
            </div>
        </div>

        <hr>
        <div class="data-section">
            <h2>Движение материалов</h2>
            <p id="balances-loading" class="loading">Загрузка остатков...</p>
            <div id="balances-table-container">
            </div>
        </div>
        <hr>

        <div class="data-section">
            <h2>Последние транзакции</h2>
            <div class="transaction-controls">
                <label for="transaction-limit">Показать:</label>
                <select id="transaction-limit">
                    <option value="5">5 записей</option>
                    <option value="10" selected>10 записей</option>
                    <option value="20">20 записей</option>
                    <option value="50">50 записей</option>
                    <option value="100">100 записей</option>
                    <option value="all">Все записи</option>
                </select>
            </div>
            <p id="transactions-loading" class="loading">Загрузка транзакций...</p>
            <div id="transactions-table-container">
                <table class="transactions-table"></table>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>

